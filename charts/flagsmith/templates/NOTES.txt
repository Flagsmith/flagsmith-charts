# Flagsmith pods are now starting in the cluster #

See documentation at https://artifacthub.io/packages/helm/flagsmith/flagsmith/{{ .Chart.Version }}
for more configuration options.

To access Flagsmith using port-forwarding, run:

kubectl -n {{ .Release.Namespace }} port-forward svc/{{ include "flagsmith.fullname" . }}-frontend 8080:{{ .Values.service.frontend.port }}

Then access http://localhost:8080 in a browser.

{{ if not (and .Values.ingress.frontend.enabled .Values.ingress.api.enabled) }}

{{- $noIngressFor := (list) -}}
{{- if not .Values.ingress.api.enabled -}}{{- $noIngressFor = append $noIngressFor "api" -}}{{- end -}}
{{- if not .Values.ingress.frontend.enabled -}}{{- $noIngressFor = append $noIngressFor "frontend" -}}{{- end -}}
{{- $commaParts := (slice $noIngressFor 0 (sub (len $noIngressFor) 1)) -}}
{{- $andPart := (last $noIngressFor) -}}
{{- $stringParts := (compact (list (join ", " $commaParts) $andPart)) -}}
## Ingress not enabled for {{ join " and " $stringParts }} ##

See documentation at https://artifacthub.io/packages/helm/flagsmith/flagsmith/{{ .Chart.Version }}#ingress-configuration
for information about how to gain web access to the application.

{{- end }}

{{- if not .Values.api.analytics.enabled }}

######################################################
#####      Analytics capabilities are off!       #####
#####  Chart-provisioned InfluxDB is deprecated. #####
######################################################

If you were provisioning an InfluxDB instance for Flagsmith's
analytics with these charts, your data is safe, but no new data
will be written to it.

*In a subsequent release, chart-provisioned InfluxDB and all related
values under the `influxdb2` key will be removed.*

When you enable analytics by setting `api.analytics.enabled`
to `true`, the following database backend will be used for analytics,
in the order of preference:

  1. External InfluxDB if `influxdbExternal.enabled` set to `true`
  2. Dedicated PostgreSQL specified by the `ANALYTICS_DATABASE_URL`
     environment variable
  3. External PostgreSQL if `databaseExternal.enabled` set to `true`
  4. Chart-provisioned PostgreSQL

Note that you can use a dedicated PostgreSQL instance by providing the
value for `ANALYTICS_DATABASE_URL` environment variable under the
`extraEnvFromSecret` key.
{{- end}}

{{- if not .Values.api.secretKey }}

######################################
##### Warning: no secret key set #####
######################################

No secret key is set, a new one will be randomly generated at each
deployment. For production systems, it is strongly recommended to
generate a large random value and set it at `api.secretKey`. It must
be kept secret.

See https://docs.flagsmith.com/deployment/locally-api#creating-a-secret-key
{{- end }}

--------------------------------------
